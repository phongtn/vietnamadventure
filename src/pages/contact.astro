---
import Layout from '../layouts/Layout.astro';
import Newsletter from '../components/Newsletter.astro';

const contactInfo = [
  {
    icon: "M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z",
    title: "Phone",
    content: "+84 24 1234 5678",
    link: "tel:+842412345678"
  },
  {
    icon: "M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",
    title: "Email",
    content: "info@vietnamadv.com",
    link: "mailto:info@vietnamadv.com"
  },
  {
    icon: "M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z M15 11a3 3 0 11-6 0 3 3 0 016 0z",
    title: "Office",
    content: "17 Tran Hung Dao, Hoan Kiem District, Hanoi, Vietnam",
    link: "https://maps.google.com"
  }
];

const faqs = [
  {
    question: "Do I need to book adventures in advance?",
    answer: "For most popular treks and guided adventures, we recommend booking at least 2-4 weeks in advance, especially during peak season (October-April). Some remote or specialized adventures may require longer lead times."
  },
  {
    question: "What fitness level is required for your adventures?",
    answer: "Our adventures range from easy to challenging. Each guide includes a difficulty rating and fitness recommendation. Most hiking and trail running adventures require moderate fitness, while technical climbing requires specific skills and experience."
  },
  {
    question: "Do you offer guided tours?",
    answer: "While we primarily provide detailed guides for independent adventurers, we can connect you with trusted local guides and tour operators for many destinations. Contact us for personalized recommendations."
  },
  {
    question: "What's the best season for outdoor activities in Vietnam?",
    answer: "The ideal season varies by region. Northern Vietnam is best from September to November and March to May. Central Vietnam is good from February to July. Southern Vietnam works well from December to April. Each adventure guide includes specific seasonal recommendations."
  },
  {
    question: "Can beginners participate in the climbing adventures?",
    answer: "Yes! Many locations like Cat Ba Island have routes suitable for beginners with proper guidance. We clearly mark which adventures are suitable for beginners and which require more experience."
  }
];
---

<Layout 
  title="Contact Us" 
  description="Get in touch with the VietnamADV team for adventure recommendations, partnership opportunities, or questions about our outdoor guides."
  image="https://images.unsplash.com/photo-1598430772299-8412a84ea34f"
>
  <!-- Hero Section -->
  <div class="relative">
    <div class="h-[40vh] min-h-[300px] w-full relative">
      <img 
        src="https://images.unsplash.com/photo-1598430772299-8412a84ea34f" 
        alt="Vietnam adventure landscape"
        class="absolute inset-0 w-full h-full object-cover"
      />
      <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"></div>
      <div class="absolute bottom-0 w-full p-6 md:p-12">
        <div class="container-custom">
          <h1 class="text-white mb-2">Contact Us</h1>
          <p class="text-white/90 text-lg max-w-2xl">Get in touch with our team for adventure recommendations or questions</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Contact Section -->
  <section class="py-16 bg-white">
    <div class="container-custom">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
        <!-- Contact Form -->
        <div>
          <h2 class="text-2xl md:text-3xl font-inter font-bold mb-6">Send Us a Message</h2>
          
          <form 
            class="space-y-6"
            x-data="{ 
              name: '', 
              email: '',
              subject: '',
              message: '',
              submitted: false,
              statusMessage: '',
              statusType: ''
            }"
            x-on:submit.prevent="
              submitted = true;
              statusMessage = 'Thank you for your message! We will get back to you soon.';
              statusType = 'success';
              name = '';
              email = '';
              subject = '';
              message = '';
            "
          >
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label for="name" class="block text-sm font-medium text-text/70 mb-1">Your Name</label>
                <input 
                  type="text" 
                  id="name" 
                  name="name" 
                  x-model="name"
                  class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary"
                  required
                />
              </div>
              
              <div>
                <label for="email" class="block text-sm font-medium text-text/70 mb-1">Email Address</label>
                <input 
                  type="email" 
                  id="email" 
                  name="email" 
                  x-model="email"
                  class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary"
                  required
                />
              </div>
            </div>
            
            <div>
              <label for="subject" class="block text-sm font-medium text-text/70 mb-1">Subject</label>
              <input 
                type="text" 
                id="subject" 
                name="subject" 
                x-model="subject"
                class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary"
                required
              />
            </div>
            
            <div>
              <label for="message" class="block text-sm font-medium text-text/70 mb-1">Your Message</label>
              <textarea 
                id="message" 
                name="message" 
                x-model="message"
                rows="5" 
                class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary"
                required
              ></textarea>
            </div>
            
            <div class="flex items-center">
              <input 
                type="checkbox" 
                id="consent" 
                name="consent" 
                class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"
                required
              />
              <label for="consent" class="ml-2 block text-sm text-text/70">
                I agree to the <a href="/privacy" class="text-primary hover:underline">privacy policy</a>.
              </label>
            </div>
            
            <button 
              type="submit" 
              class="btn btn-primary w-full md:w-auto"
              x-bind:disabled="submitted"
            >
              Send Message
            </button>
            
            <div 
              x-show="submitted" 
              x-cloak
              x-bind:class="{
                'bg-green-100 text-green-800': statusType === 'success',
                'bg-red-100 text-red-800': statusType === 'error'
              }"
              class="p-4 rounded-md"
            >
              <p x-text="statusMessage"></p>
            </div>
          </form>
        </div>
        
        <!-- Contact Information -->
        <div>
          <h2 class="text-2xl md:text-3xl font-inter font-bold mb-6">Contact Information</h2>
          
          <div class="space-y-6 mb-10">
            {contactInfo.map(item => (
              <div class="flex">
                <div class="flex-shrink-0">
                  <div class="bg-primary/10 w-12 h-12 rounded-lg flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d={item.icon} />
                    </svg>
                  </div>
                </div>
                <div class="ml-4">
                  <h3 class="text-lg font-inter font-semibold">{item.title}</h3>
                  <a href={item.link} class="text-text/80 hover:text-primary">{item.content}</a>
                </div>
              </div>
            ))}
          </div>
          
          <h3 class="text-xl font-inter font-semibold mb-4">Follow Us</h3>
          <div class="flex space-x-4">
            <a href="https://facebook.com/" target="_blank" rel="noopener noreferrer" class="bg-primary/10 w-10 h-10 rounded-full flex items-center justify-center text-primary hover:bg-primary hover:text-white transition duration-300">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"/>
              </svg>
            </a>
            <a href="https://instagram.com/" target="_blank" rel="noopener noreferrer" class="bg-primary/10 w-10 h-10 rounded-full flex items-center justify-center text-primary hover:bg-primary hover:text-white transition duration-300">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
              </svg>
            </a>
            <a href="https://twitter.com/" target="_blank" rel="noopener noreferrer" class="bg-primary/10 w-10 h-10 rounded-full flex items-center justify-center text-primary hover:bg-primary hover:text-white transition duration-300">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
              </svg>
            </a>
            <a href="https://youtube.com/" target="_blank" rel="noopener noreferrer" class="bg-primary/10 w-10 h-10 rounded-full flex items-center justify-center text-primary hover:bg-primary hover:text-white transition duration-300">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- FAQs -->
  <section class="py-16 bg-background">
    <div class="container-custom">
      <h2 class="text-2xl md:text-3xl font-inter font-bold mb-10 text-center">Frequently Asked Questions</h2>
      
      <div class="max-w-3xl mx-auto space-y-6" x-data="{ activeTab: null }">
        {faqs.map((faq, index) => (
          <div class="bg-white rounded-lg shadow-sm overflow-hidden">
            <button 
              class="flex justify-between items-center w-full p-5 text-left"
              x-on:click={`activeTab = activeTab === ${index} ? null : ${index}`}
            >
              <span class="font-inter font-semibold">{faq.question}</span>
              <svg 
                xmlns="http://www.w3.org/2000/svg" 
                class="h-5 w-5 text-primary transition-transform duration-300"
                x-bind:class={`activeTab === ${index} ? 'rotate-180' : ''`}
                fill="none" 
                viewBox="0 0 24 24" 
                stroke="currentColor"
              >
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </button>
            
            <div 
              class="px-5 pb-5"
              x-show={`activeTab === ${index}`}
              x-transition:enter="transition ease-out duration-200"
              x-transition:enter-start="opacity-0 -translate-y-2"
              x-transition:enter-end="opacity-100 translate-y-0"
              x-transition:leave="transition ease-in duration-150"
              x-transition:leave-start="opacity-100 translate-y-0"
              x-transition:leave-end="opacity-0 -translate-y-2"
              x-cloak
            >
              <p class="text-text/80">{faq.answer}</p>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>
  
  <!-- Map -->
  <section class="py-16 bg-white">
    <div class="container-custom">
      <h2 class="text-2xl md:text-3xl font-inter font-bold mb-6">Find Us</h2>
      
      <div class="h-96 rounded-lg overflow-hidden shadow-md">
        <div id="map" class="w-full h-full"></div>
      </div>
    </div>
  </section>
  
  <!-- Newsletter -->
  <Newsletter />
</Layout>

<script>
  // Initialize map when the page loads
  document.addEventListener('DOMContentLoaded', function() {
    // Check if Leaflet script is already loaded
    if (typeof L === 'undefined') {
      // Load Leaflet CSS
      const leafletCss = document.createElement('link');
      leafletCss.rel = 'stylesheet';
      leafletCss.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';
      leafletCss.integrity = 'sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=';
      leafletCss.crossOrigin = '';
      document.head.appendChild(leafletCss);
      
      // Load Leaflet JS
      const leafletScript = document.createElement('script');
      leafletScript.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';
      leafletScript.integrity = 'sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=';
      leafletScript.crossOrigin = '';
      document.head.appendChild(leafletScript);
      
      // Initialize map after script has loaded
      leafletScript.onload = function() {
        initializeMap();
      };
    } else {
      // Leaflet already loaded, initialize map directly
      initializeMap();
    }
  });
  
  function initializeMap() {
    // Create map instance (Hanoi coordinates)
    const map = L.map('map').setView([21.0278, 105.8342], 15);
    
    // Add OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);
    
    // Add office marker
    const marker = L.marker([21.0278, 105.8342]).addTo(map);
    marker.bindPopup("<b>VietnamADV Office</b><br>17 Tran Hung Dao, Hoan Kiem District").openPopup();
  }
</script>

<style>
  [x-cloak] { display: none !important; }
</style>
